import{r as i,u as D,j as e,L as n,e as S}from"./index-d1415b30.js";import{A,P as F}from"./Other-cab0fb53.js";import{S as P,F as C}from"./Search-c8d249aa.js";import{a as f}from"./js.cookie-edb2da2a.js";import"./index-bb549378.js";import"./setPrototypeOf-72fdee31.js";function U(){const[x,g]=i.useState([]),[h,u]=i.useState([]),[v,j]=i.useState(1),o=8,{t:r}=D(),[c,p]=i.useState([]);i.useEffect(()=>{const a=f.get("favorites");a&&p(a.split(",").map(Number))},[]),i.useEffect(()=>{(async()=>{try{const t=(await S()).sort((l,d)=>new Date(d.publishDate)-new Date(l.publishDate));g(t),u(t)}catch(s){console.log(s)}})()},[]);const N=a=>{const s=c.includes(a)?c.filter(t=>t!==a):[...c,a];p(s),f.set("favorites",s.join(","),{expires:365})},y=a=>{const s=new Date(a);return s.toDateString()===new Date().toDateString()?s.toLocaleTimeString("default",{hour:"numeric",minute:"numeric"}):s.toLocaleDateString("default",{day:"numeric",month:"long",year:"numeric"})},b=v*o,k=h.slice(b-o,b),w=a=>{const{subjects:s,years:t,educations:l}=a,d=x.filter(m=>(!s.length||s.includes(m.subjects.nameSubject))&&(!t.length||t.includes(m.years.year))&&(!l.length||l.includes(m.educations.nameEducation)));u(d),j(1)};return e.jsxs("div",{className:"container mt-4",children:[e.jsx("header",{id:"header",className:"navbar navbar-expand-lg navbar-spacer-y-0 flex-lg-column",children:e.jsx("nav",{className:"js-mega-menu flex-grow-1",children:e.jsx("div",{className:"collapse navbar-collapse",id:"navbarDoubleLineContainerNavDropdown",children:e.jsxs("ul",{className:"nav nav-tabs align-items-center",children:[e.jsx("li",{className:"nav-item",children:e.jsxs(n,{className:"nav-link",to:"/form","data-placement":"left",children:[e.jsx("i",{className:"bi bi-house dropdown-item-icon"})," ",r("home")]})}),e.jsx("li",{className:"nav-item",children:e.jsxs(n,{className:"nav-link active",to:"/activity","data-placement":"left",children:[e.jsx("i",{className:"bi bi-activity dropdown-item-icon"})," ",r("activity")]})}),e.jsx("li",{className:"nav-item",children:e.jsxs(n,{className:"nav-link",to:"/resources","data-placement":"left",children:[e.jsx("i",{className:"bi bi-file-earmark-arrow-down dropdown-item-icon"})," ",r("resources")]})}),e.jsx("li",{className:"nav-item",children:e.jsxs(n,{className:"nav-link",to:"/tools","data-placement":"left",children:[e.jsx("i",{className:"bi bi-tools dropdown-item-icon"})," ",r("tool")]})})]})})})}),e.jsxs("main",{className:"card card-body",children:[e.jsx("div",{className:"card",children:e.jsxs("div",{className:"card-header card-header-content-md-between",children:[e.jsx("div",{className:"mb-2",children:e.jsx(P,{posts:x})}),e.jsxs("div",{className:"d-grid d-sm-flex justify-content-md-end align-items-sm-center",children:[e.jsx(C,{onFilter:w}),e.jsx(A,{})]})]})}),k.map(a=>e.jsx("div",{className:"my-3 p-3 rounded shadow-sm card",style:{borderRadius:"10px",boxShadow:"0 4px 8px rgba(0, 0, 0, 0.1)"},children:e.jsxs("div",{className:"d-flex align-items-start",children:[e.jsx("div",{className:"avatar avatar-sm avatar-circle me-2",children:e.jsx("span",{className:"avatar-soft-dark",title:a.users.name,children:e.jsx("span",{className:"bd-placeholder-img flex-shrink-0 me-2 rounded avatar-initials",children:a.users.name.charAt(0).toUpperCase()})})}),e.jsxs("div",{className:"flex-grow-1",children:[e.jsxs("div",{className:"d-flex justify-content-between align-items-center",children:[e.jsx("h5",{className:"mb-1",children:e.jsxs("small",{className:"text-muted",children:[e.jsx(n,{to:`/view-profile/${a.users.idTeacher}`,children:a.users.name})," | ",y(a.publishDate)]})}),e.jsx("i",{className:`bi ${c.includes(a.idActivity)?"bi-bookmark-fill bookmark":"bi-bookmark bookmark"}`,role:"button",onClick:()=>N(a.idActivity)})]}),e.jsx("div",{children:e.jsx("strong",{className:"text-gray-dark",children:a.title})}),e.jsx("div",{children:e.jsx("span",{className:"text-gray-dark",children:a.description.length>200?`${a.description.substring(0,200)}...`:a.description})}),e.jsxs("div",{className:"mb-2",children:[e.jsx("span",{className:"badge bg-primary me-1",children:a.subjects.nameSubject}),e.jsx("span",{className:"badge bg-success me-1",children:a.educations.nameEducation}),e.jsx("span",{className:"badge bg-warning",children:a.years.year})]}),e.jsx("div",{className:"d-flex align-items-center",children:e.jsx(n,{to:`/activity/view-activity/${a.idActivity}`,className:"link",children:r("more")})})]})]})},a.idActivity)),e.jsx(F,{postsPerPage:o,totalPosts:h.length,paginate:j,currentPage:v})]})]})}export{U as default};
