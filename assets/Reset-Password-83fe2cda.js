import{r as o,n as j,u as b,j as s,q as N,v as g}from"./index-42ce2823.js";function k(){const[r,m]=o.useState(""),[c,p]=o.useState(""),[n,h]=o.useState({}),[w,i]=o.useState(""),x=j(),{t:a,i18n:y}=b(),d=new URLSearchParams(window.location.search).get("token");o.useEffect(()=>{(async()=>{try{(await N(d)).success||i("Invalid or expired token")}catch{i(s.jsxs("p",{className:"text-center",children:[s.jsxs("span",{className:"text-danger",children:[a("text_info_reset_password_1")," "]}),s.jsx("br",{}),a("text_info_reset_password_2")]}))}})()},[d]);const v=()=>{const e={};return(!r||r.length<8)&&(e.password="A nova senha deve ter pelo menos 8 caracteres."),r!==c&&(e.confPassword="As novas senhas nÃ£o coincidem."),h(e),Object.keys(e).length===0},f=async e=>{var t,l;if(e.preventDefault(),!!v())try{await g(d,r,c),x("/sign-in")}catch(u){i(((l=(t=u.response)==null?void 0:t.data)==null?void 0:l.message)||"Erro no servidor")}};return s.jsx("main",{id:"content",role:"main",className:"main",children:s.jsx("div",{className:"container py-5 py-sm-7 mt-10",children:s.jsx("div",{className:"mx-auto",style:{maxWidth:"30rem"},children:s.jsx("div",{className:"card card-lg mb-5",children:s.jsx("div",{className:"card-body",children:s.jsxs("form",{onSubmit:f,children:[s.jsx("div",{className:"text-center mb-5",children:s.jsx("h1",{className:"display-5",children:a("change_your_password")})}),s.jsxs("div",{className:"mb-4",children:[s.jsx("label",{className:"form-label w-100",htmlFor:"password-novo",children:a("new_password")}),s.jsx("input",{type:"password",className:`form-control ${n.password?"is-invalid":""}`,id:"password-novo",placeholder:a("password"),value:r,onChange:e=>m(e.target.value)}),s.jsx("span",{className:"invalid-feedback",children:n.password})]}),s.jsxs("div",{className:"mb-4",children:[s.jsx("label",{className:"form-label w-100",htmlFor:"password-novo-con",children:a("confirm_password")}),s.jsx("input",{type:"password",className:`form-control ${n.confPassword?"is-invalid":""}`,id:"password-novo-con",placeholder:a("confirm_password"),value:c,onChange:e=>p(e.target.value)}),s.jsx("span",{className:"invalid-feedback",children:n.confPassword})]}),w,s.jsx("div",{className:"d-grid",children:s.jsx("button",{type:"submit",className:"btn btn-primary btn-lg",children:a("confirm")})})]})})})})})})}export{k as default};
