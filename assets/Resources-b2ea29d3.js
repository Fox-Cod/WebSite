import{r as n,u as S,R as e,L as l,d as R}from"./main-faf44e1c.js";import{a as P,P as B}from"./Other-7d28e6c9.js";import{a as j,b as C}from"./Search-71c98222.js";import{a as g}from"./js.cookie-edb2da2a.js";import"./index-507c5bbd.js";import"./setPrototypeOf-72fdee31.js";function G(){const[i,b]=n.useState([]),[d,u]=n.useState([]),[p,v]=n.useState(1),[o]=n.useState(8),{t:r,i18n:L}=S(),[m,E]=n.useState([]),f=t=>{let a=[...m];m.includes(t)?a=a.filter(s=>s!==t):a.push(t),E(a),g.set("resourcesFavorites",a.join(","),{expires:365})};n.useEffect(()=>{const t=g.get("resourcesFavorites");t&&E(t.split(",").map(Number))},[]),n.useEffect(()=>{(async()=>{try{const s=(await R()).sort((c,D)=>new Date(D.publishDate)-new Date(c.publishDate));b(s),u(s)}catch(a){console.log(a)}})()},[]);const h=t=>{const a=new Date(t),s=new Date;return a.toDateString()===s.toDateString()?a.toLocaleTimeString("default",{hour:"numeric",minute:"numeric"}):a.toLocaleDateString("default",{day:"numeric",month:"long",year:"numeric"})},x=t=>{if(t===0)return"0 Bytes";const a=1024,s=["Bytes","KB","MB","GB","TB"],c=Math.floor(Math.log(t)/Math.log(a));return parseFloat((t/Math.pow(a,c)).toFixed(2))+" "+s[c]},N=p*o,w=N-o,y=d.slice(w,N),k=t=>v(t),F=t=>{const{type:a}=t,s=i.filter(c=>!a.length||a.includes(c.type));u(s),v(1)};return e.createElement("div",{className:"container mt-4"},e.createElement("header",{id:"header",className:"navbar navbar-expand-lg navbar-spacer-y-0 flex-lg-column"},e.createElement("nav",{className:"js-mega-menu flex-grow-1"},e.createElement("div",{className:"collapse navbar-collapse",id:"navbarDoubleLineContainerNavDropdown"},e.createElement("ul",{className:"nav nav-tabs align-items-center"},e.createElement("li",{className:"nav-item"},e.createElement(l,{className:"nav-link",to:"/form","data-placement":"left"},e.createElement("i",{className:"bi bi-house dropdown-item-icon"})," ",r("home"))),e.createElement("li",{className:"nav-item"},e.createElement(l,{className:"nav-link",to:"/activity","data-placement":"left"},e.createElement("i",{className:"bi bi-activity dropdown-item-icon"})," ",r("activity"))),e.createElement("li",{className:"nav-item"},e.createElement(l,{className:"nav-link active",to:"/resources","data-placement":"left"},e.createElement("i",{className:"bi bi-file-earmark-arrow-down dropdown-item-icon"})," ",r("resources"))),e.createElement("li",{className:"nav-item"},e.createElement(l,{className:"nav-link",to:"/tools","data-placement":"left"},e.createElement("i",{className:"bi bi-tools dropdown-item-icon"})," ",r("tool"))))))),e.createElement("main",{className:"card card-body"},e.createElement("div",{className:"card"},e.createElement("div",{className:"card-header card-header-content-md-between"},e.createElement("div",{className:"mb-2"},e.createElement(j,{posts:i})),e.createElement("div",{className:"d-grid d-sm-flex justify-content-md-end align-items-sm-center"},e.createElement(C,{onFilter:F}),e.createElement(P,null)))),y.map(t=>e.createElement("div",{className:"my-3 p-3 rounded shadow-sm card",key:t.idResource,style:{borderRadius:"10px",boxShadow:"0 4px 8px rgba(0, 0, 0, 0.1)"}},e.createElement("div",{className:"d-flex align-items-start"},e.createElement("div",{className:"avatar avatar-sm avatar-circle me-2"},e.createElement("span",{className:"avatar-soft-dark",title:t.users.name},e.createElement("span",{className:"bd-placeholder-img flex-shrink-0 me-2 rounded avatar-initials"},t.users.name.charAt(0).toUpperCase()))),e.createElement("div",{className:"flex-grow-1"},e.createElement("div",{className:"d-flex justify-content-between align-items-center"},e.createElement("h5",{className:"mb-1"},e.createElement("small",{className:"text-muted"},e.createElement(l,{to:`/profile/view-profile/${t.users.idTeacher}`},t.users.name)," | ",h(t.publishDate))),e.createElement("i",{className:`bi ${m.includes(t.idResource)?"bi-bookmark-fill bookmark":"bi-bookmark bookmark"}`,role:"button",onClick:()=>f(t.idResource)})),e.createElement("div",{className:"d-flex justify-content-between"},e.createElement("strong",{className:"text-gray-dark"},t.title)),e.createElement("div",{className:"d-flex justify-content-between"},e.createElement("span",{className:"text-gray-dark"},t.description.length>200?`${t.description.substring(0,200)}...`:t.description)),e.createElement("span",{className:"badge bg-secondary mb-2"},t.type),t.type==="Ficheiro"?e.createElement("div",{className:"card p-3"},e.createElement("li",{className:"list-group-item"},e.createElement("div",{className:"row align-items-center"},e.createElement("div",{className:"col-auto"},e.createElement("img",{className:"avatar avatar-xs avatar-4x3",src:"../assets/svg/illustrations/placeholder-img-format.svg",alt:"Img"})),e.createElement("div",{className:"col"},e.createElement("h5",{className:"mb-0",title:r("download")},e.createElement(l,{to:`http://localhost:8081/api/files/${t.fileName}`,download:!0},t.fileName)),e.createElement("ul",{className:"list-inline list-separator small text-body"},e.createElement("li",{className:"list-inline-item"},r("file_size")," ",x(t.fileSize))))))):null,e.createElement("div",{className:"mb-2"}),e.createElement("div",{className:"d-flex align-items-center"},e.createElement(l,{to:`/resource/view-resource/${t.idResource}`,className:"link"},r("more"))))))),e.createElement(B,{postsPerPage:o,totalPosts:d.length,paginate:k,currentPage:p})))}export{G as default};
