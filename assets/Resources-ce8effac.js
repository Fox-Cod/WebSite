import{r as i,u as S,j as e,L as n,d as P}from"./index-42ce2823.js";import{a as R,P as B}from"./Other-b01c68e5.js";import{a as C,b as L}from"./Search-4087293e.js";import{a as v}from"./js.cookie-edb2da2a.js";import"./index-63c2f2d1.js";import"./setPrototypeOf-72fdee31.js";function G(){const[d,N]=i.useState([]),[m,x]=i.useState([]),[h,u]=i.useState(1),[c]=i.useState(8),{t:r,i18n:M}=S(),[o,p]=i.useState([]),g=s=>{let a=[...o];o.includes(s)?a=a.filter(t=>t!==s):a.push(s),p(a),v.set("resourcesFavorites",a.join(","),{expires:365})};i.useEffect(()=>{const s=v.get("resourcesFavorites");s&&p(s.split(",").map(Number))},[]),i.useEffect(()=>{(async()=>{try{const t=(await P()).sort((l,D)=>new Date(D.publishDate)-new Date(l.publishDate));N(t),x(t)}catch(a){console.log(a)}})()},[]);const b=s=>{const a=new Date(s),t=new Date;return a.toDateString()===t.toDateString()?a.toLocaleTimeString("default",{hour:"numeric",minute:"numeric"}):a.toLocaleDateString("default",{day:"numeric",month:"long",year:"numeric"})},f=s=>{if(s===0)return"0 Bytes";const a=1024,t=["Bytes","KB","MB","GB","TB"],l=Math.floor(Math.log(s)/Math.log(a));return parseFloat((s/Math.pow(a,l)).toFixed(2))+" "+t[l]},j=h*c,w=j-c,y=m.slice(w,j),k=s=>u(s),F=s=>{const{type:a}=s,t=d.filter(l=>!a.length||a.includes(l.type));x(t),u(1)};return e.jsxs("div",{className:"container mt-4",children:[e.jsx("header",{id:"header",className:"navbar navbar-expand-lg navbar-spacer-y-0 flex-lg-column",children:e.jsx("nav",{className:"js-mega-menu flex-grow-1",children:e.jsx("div",{className:"collapse navbar-collapse",id:"navbarDoubleLineContainerNavDropdown",children:e.jsxs("ul",{className:"nav nav-tabs align-items-center",children:[e.jsx("li",{className:"nav-item",children:e.jsxs(n,{className:"nav-link",to:"/form","data-placement":"left",children:[e.jsx("i",{className:"bi bi-house dropdown-item-icon"})," ",r("home")]})}),e.jsx("li",{className:"nav-item",children:e.jsxs(n,{className:"nav-link",to:"/activity","data-placement":"left",children:[e.jsx("i",{className:"bi bi-activity dropdown-item-icon"})," ",r("activity")]})}),e.jsx("li",{className:"nav-item",children:e.jsxs(n,{className:"nav-link active",to:"/resources","data-placement":"left",children:[e.jsx("i",{className:"bi bi-file-earmark-arrow-down dropdown-item-icon"})," ",r("resources")]})}),e.jsx("li",{className:"nav-item",children:e.jsxs(n,{className:"nav-link",to:"/tools","data-placement":"left",children:[e.jsx("i",{className:"bi bi-tools dropdown-item-icon"})," ",r("tool")]})})]})})})}),e.jsxs("main",{className:"card card-body",children:[e.jsx("div",{className:"card",children:e.jsxs("div",{className:"card-header card-header-content-md-between",children:[e.jsx("div",{className:"mb-2",children:e.jsx(C,{posts:d})}),e.jsxs("div",{className:"d-grid d-sm-flex justify-content-md-end align-items-sm-center",children:[e.jsx(L,{onFilter:F}),e.jsx(R,{})]})]})}),y.map(s=>e.jsx("div",{className:"my-3 p-3 rounded shadow-sm card",style:{borderRadius:"10px",boxShadow:"0 4px 8px rgba(0, 0, 0, 0.1)"},children:e.jsxs("div",{className:"d-flex align-items-start",children:[e.jsx("div",{className:"avatar avatar-sm avatar-circle me-2",children:e.jsx("span",{className:"avatar-soft-dark",title:s.users.name,children:e.jsx("span",{className:"bd-placeholder-img flex-shrink-0 me-2 rounded avatar-initials",children:s.users.name.charAt(0).toUpperCase()})})}),e.jsxs("div",{className:"flex-grow-1",children:[e.jsxs("div",{className:"d-flex justify-content-between align-items-center",children:[e.jsx("h5",{className:"mb-1",children:e.jsxs("small",{className:"text-muted",children:[e.jsx(n,{to:`/profile/view-profile/${s.users.idTeacher}`,children:s.users.name})," | ",b(s.publishDate)]})}),e.jsx("i",{className:`bi ${o.includes(s.idResource)?"bi-bookmark-fill bookmark":"bi-bookmark bookmark"}`,role:"button",onClick:()=>g(s.idResource)})]}),e.jsx("div",{className:"d-flex justify-content-between",children:e.jsx("strong",{className:"text-gray-dark",children:s.title})}),e.jsx("div",{className:"d-flex justify-content-between",children:e.jsx("span",{className:"text-gray-dark",children:s.description.length>200?`${s.description.substring(0,200)}...`:s.description})}),e.jsx("span",{className:"badge bg-secondary mb-2",children:s.type}),s.type==="Ficheiro"?e.jsx("div",{className:"card p-3",children:e.jsx("li",{className:"list-group-item",children:e.jsxs("div",{className:"row align-items-center",children:[e.jsx("div",{className:"col-auto",children:e.jsx("img",{className:"avatar avatar-xs avatar-4x3",src:"../assets/svg/illustrations/placeholder-img-format.svg",alt:"Img"})}),e.jsxs("div",{className:"col",children:[e.jsx("h5",{className:"mb-0",title:r("download"),children:e.jsx(n,{to:`http://localhost:8081/api/files/${s.fileName}`,download:!0,children:s.fileName})}),e.jsx("ul",{className:"list-inline list-separator small text-body",children:e.jsxs("li",{className:"list-inline-item",children:[r("file_size")," ",f(s.fileSize)]})})]})]})})}):null,e.jsx("div",{className:"mb-2"}),e.jsx("div",{className:"d-flex align-items-center",children:e.jsx(n,{to:`/resource/view-resource/${s.idResource}`,className:"link",children:r("more")})})]})]})},s.idResource)),e.jsx(B,{postsPerPage:c,totalPosts:m.length,paginate:k,currentPage:h})]})]})}export{G as default};
