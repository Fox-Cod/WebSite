import{r as l,C as O,i as P,u as L,R as e,L as c,j as T,k as F}from"./main-faf44e1c.js";import{E as I,b as R}from"./Other-7d28e6c9.js";import{a as g}from"./js.cookie-edb2da2a.js";import"./index-507c5bbd.js";function H(){const{user:r}=l.useContext(O),[n,y]=l.useState({}),[m,h]=l.useState([]),[x,p]=l.useState(!0),[E,k]=l.useState(null),[v,w]=l.useState(1),i=10,{activityId:o}=P();console.log(n);const{t:s}=L(),[d,f]=l.useState([]),_=t=>{let a=[...d];d.includes(t)?a=a.filter(u=>u!==t):a.push(t),f(a),g.set("favorites",a.join(","),{expires:365})};l.useEffect(()=>{const t=g.get("favorites");t&&f(t.split(",").map(Number))},[]),l.useEffect(()=>{async function t(){try{const a=await T(o);y(a),p(!1)}catch(a){console.error("Erro durante o carregamento de dados:",a),k("Erro ao carregar dados. Por favor, tente novamente."),p(!1)}}t()},[o]),l.useEffect(()=>{(async()=>{try{const a=await F(o);h(a)}catch(a){console.log(a)}})()},[o]);const N=t=>{const a=new Date(t),u=new Date;return a.toDateString()===u.toDateString()?a.toLocaleTimeString("default",{hour:"numeric",minute:"numeric"}):a.toLocaleDateString("default",{day:"numeric",month:"long",year:"numeric"})};if(x)return e.createElement("div",{className:"d-flex justify-content-center mt-5"},e.createElement("div",{className:"spinner-border text-primary",role:"status"},e.createElement("span",{className:"visually-hidden"},"Загрузка...")));if(E)return e.createElement("div",{className:"alert alert-danger text-center mt-5",role:"alert"},E);const C=r&&(r._defaultRole==="administrador"||r._userId===n.users.idTeacher),b=v*i,D=b-i,A=m.slice(D,b),S=Math.ceil(m.length/i),j=t=>{w(t)};return e.createElement("div",{className:"container mt-4"},e.createElement("header",{id:"header",className:"navbar navbar-expand-lg navbar-spacer-y-0 flex-lg-column"},e.createElement("nav",{className:"js-mega-menu flex-grow-1"},e.createElement("div",{className:"collapse navbar-collapse",id:"navbarDoubleLineContainerNavDropdown"},e.createElement("ul",{className:"nav nav-tabs align-items-center"},e.createElement("li",{className:"nav-item"},e.createElement(c,{className:"nav-link",to:"/form","data-placement":"left"},e.createElement("i",{className:"bi bi-house dropdown-item-icon"})," ",s("home"))),e.createElement("li",{className:"nav-item"},e.createElement(c,{className:"nav-link active",to:"/activity","data-placement":"left"},e.createElement("i",{className:"bi bi-activity dropdown-item-icon"})," ",s("activity"))),e.createElement("li",{className:"nav-item"},e.createElement(c,{className:"nav-link",to:"/resources","data-placement":"left"},e.createElement("i",{className:"bi bi-file-earmark-arrow-down dropdown-item-icon"})," ",s("resources"))),e.createElement("li",{className:"nav-item"},e.createElement(c,{className:"nav-link",to:"/tools","data-placement":"left"},e.createElement("i",{className:"bi bi-tools dropdown-item-icon"})," ",s("tool"))))))),e.createElement("main",{className:"card card-body"},e.createElement("div",{className:"my-3 p-3 rounded shadow-sm card",style:{borderRadius:"10px",boxShadow:"0 4px 8px rgba(0, 0, 0, 0.1)"}},e.createElement("div",{className:"d-flex align-items-start"},e.createElement("div",{className:"avatar avatar-sm avatar-circle me-2"},e.createElement("span",{className:"avatar-soft-dark",title:n.users.name},e.createElement("span",{className:"bd-placeholder-img flex-shrink-0 me-2 rounded avatar-initials"},n.users.name.charAt(0).toUpperCase()))),e.createElement("div",{className:"flex-grow-1"},e.createElement("div",{className:"d-flex justify-content-between align-items-center"},e.createElement("h5",{className:"mb-1"},e.createElement("small",{className:"text-muted"},e.createElement(c,{to:`/profile/view-profile/${n.users.idTeacher}`},n.users.name)," | ",N(n.publishDate)," | ",e.createElement("i",{className:`bi ${d.includes(n.idActivity)?"bi-bookmark-fill bookmark":"bi-bookmark bookmark"}`,role:"button",onClick:()=>_(n.idActivity)}))),C&&e.createElement(I,null)),e.createElement("div",{className:"d-flex justify-content-between"},e.createElement("strong",{className:"text-gray-dark"},n.title)),e.createElement("div",{className:"d-flex justify-content-between"},e.createElement("span",{className:"text-gray-dark"},n.description)),e.createElement("div",{className:"mb-2"},e.createElement("span",{className:"badge bg-primary me-1"},n.subjects.nameSubject),e.createElement("span",{className:"badge bg-success me-1"},n.educations.nameEducation),e.createElement("span",{className:"badge bg-warning"},n.years.year)),e.createElement("div",{className:"d-flex justify-content-end align-items-center"},e.createElement(c,{to:n.planning,className:"btn btn-outline-primary btn-sm me-2"},s("planning")),e.createElement(c,{to:n.presentation,className:"btn btn-outline-secondary btn-sm"},s("presentation")))))),r._isAuth?e.createElement("div",{className:"card",id:"accordionExample"},e.createElement("div",{className:"accordion-header collapsed",id:"headingOne"},e.createElement("a",{className:"accordion-button link",role:"button","data-bs-toggle":"collapse","data-bs-target":"#collapseOne","aria-expanded":"false","aria-controls":"collapseOne"},e.createElement("i",{class:"bi bi-chat"}," ",s("add_comments")," "))),e.createElement("div",{id:"collapseOne",className:"accordion-collapse collapse","aria-labelledby":"headingOne","data-bs-parent":"#accordionExample"},e.createElement("div",{className:"accordion-body"},e.createElement(R,{activityId:n.idActivity})))):null,e.createElement("div",{className:"card card-body mt-3"},m.length>0?e.createElement("ul",{className:"step"},A.map((t,a)=>e.createElement("li",{className:"step-item",key:a},e.createElement("div",{className:"step-content-wrapper"},e.createElement("div",{className:"step-avatar"},e.createElement("span",{className:"avatar avatar-soft-dark","data-toggle":"tooltip","data-placement":"top",title:t.users.name},e.createElement("span",{className:"avatar-initials"},t.users.name.charAt(0).toUpperCase()))),e.createElement("div",{className:"step-content"},e.createElement("small",{className:"text-muted"},e.createElement(c,{className:"link",to:`/profile/view-profile/${t.users.idTeacher}`},t.users.name)," | ",N(t.created_at)),e.createElement("p",{className:"fs-5"},e.createElement("div",{dangerouslySetInnerHTML:{__html:t.content}}))))))):r._isAuth?e.createElement("div",{className:"text-center"},e.createElement("h5",null,s("text_info_no_comments_1")),e.createElement(c,{className:"link","data-bs-toggle":"collapse","data-bs-target":"#collapseOne","aria-expanded":"false","aria-controls":"collapseOne"},s("text_info_no_comments_2"))):e.createElement("div",{className:"accordion-body"},s("text_info_no_comments_3"),", ",e.createElement(c,{className:"link",to:"/sign-in"},s("log_in")),".")),m.length>i&&e.createElement("nav",{"aria-label":"Page navigation example",className:"mt-3"},e.createElement("ul",{className:"pagination justify-content-center"},[...Array(S)].map((t,a)=>e.createElement("li",{className:`page-item ${a+1===v?"active":""}`,key:a},e.createElement("button",{className:"page-link",onClick:()=>j(a+1)},a+1)))))))}export{H as default};
