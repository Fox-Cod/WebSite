import{r as i,C as O,h as P,u as L,j as e,L as l,i as T,k as F}from"./index-08ea0f83.js";import{E as I,b as $}from"./Other-4cb4f6e8.js";import{a as N}from"./js.cookie-edb2da2a.js";import"./index-ac301dcc.js";function H(){const{user:c}=i.useContext(O),[t,b]=i.useState({}),[r,g]=i.useState([]),[y,h]=i.useState(!0),[u,k]=i.useState(null),[p,w]=i.useState(1),o=10,{activityId:d}=P();console.log(t);const{t:n}=L(),[m,j]=i.useState([]),_=s=>{let a=[...m];m.includes(s)?a=a.filter(x=>x!==s):a.push(s),j(a),N.set("favorites",a.join(","),{expires:365})};i.useEffect(()=>{const s=N.get("favorites");s&&j(s.split(",").map(Number))},[]),i.useEffect(()=>{async function s(){try{const a=await T(d);b(a),h(!1)}catch(a){console.error("Erro durante o carregamento de dados:",a),k("Erro ao carregar dados. Por favor, tente novamente."),h(!1)}}s()},[d]),i.useEffect(()=>{(async()=>{try{const a=await F(d);g(a)}catch(a){console.log(a)}})()},[d]);const v=s=>{const a=new Date(s),x=new Date;return a.toDateString()===x.toDateString()?a.toLocaleTimeString("default",{hour:"numeric",minute:"numeric"}):a.toLocaleDateString("default",{day:"numeric",month:"long",year:"numeric"})};if(y)return e.jsx("div",{className:"d-flex justify-content-center mt-5",children:e.jsx("div",{className:"spinner-border text-primary",role:"status",children:e.jsx("span",{className:"visually-hidden",children:"Загрузка..."})})});if(u)return e.jsx("div",{className:"alert alert-danger text-center mt-5",role:"alert",children:u});const C=c&&(c._defaultRole==="administrador"||c._userId===t.users.idTeacher),f=p*o,D=f-o,E=r.slice(D,f),A=Math.ceil(r.length/o),S=s=>{w(s)};return e.jsxs("div",{className:"container mt-4",children:[e.jsx("header",{id:"header",className:"navbar navbar-expand-lg navbar-spacer-y-0 flex-lg-column",children:e.jsx("nav",{className:"js-mega-menu flex-grow-1",children:e.jsx("div",{className:"collapse navbar-collapse",id:"navbarDoubleLineContainerNavDropdown",children:e.jsxs("ul",{className:"nav nav-tabs align-items-center",children:[e.jsx("li",{className:"nav-item",children:e.jsxs(l,{className:"nav-link",to:"/form","data-placement":"left",children:[e.jsx("i",{className:"bi bi-house dropdown-item-icon"})," ",n("home")]})}),e.jsx("li",{className:"nav-item",children:e.jsxs(l,{className:"nav-link active",to:"/activity","data-placement":"left",children:[e.jsx("i",{className:"bi bi-activity dropdown-item-icon"})," ",n("activity")]})}),e.jsx("li",{className:"nav-item",children:e.jsxs(l,{className:"nav-link",to:"/resources","data-placement":"left",children:[e.jsx("i",{className:"bi bi-file-earmark-arrow-down dropdown-item-icon"})," ",n("resources")]})}),e.jsx("li",{className:"nav-item",children:e.jsxs(l,{className:"nav-link",to:"/tools","data-placement":"left",children:[e.jsx("i",{className:"bi bi-tools dropdown-item-icon"})," ",n("tool")]})})]})})})}),e.jsxs("main",{className:"card card-body",children:[e.jsx("div",{className:"my-3 p-3 rounded shadow-sm card",style:{borderRadius:"10px",boxShadow:"0 4px 8px rgba(0, 0, 0, 0.1)"},children:e.jsxs("div",{className:"d-flex align-items-start",children:[e.jsx("div",{className:"avatar avatar-sm avatar-circle me-2",children:e.jsx("span",{className:"avatar-soft-dark",title:t.users.name,children:e.jsx("span",{className:"bd-placeholder-img flex-shrink-0 me-2 rounded avatar-initials",children:t.users.name.charAt(0).toUpperCase()})})}),e.jsxs("div",{className:"flex-grow-1",children:[e.jsxs("div",{className:"d-flex justify-content-between align-items-center",children:[e.jsx("h5",{className:"mb-1",children:e.jsxs("small",{className:"text-muted",children:[e.jsx(l,{to:`/profile/view-profile/${t.users.idTeacher}`,children:t.users.name})," | ",v(t.publishDate)," | ",e.jsx("i",{className:`bi ${m.includes(t.idActivity)?"bi-bookmark-fill bookmark":"bi-bookmark bookmark"}`,role:"button",onClick:()=>_(t.idActivity)})]})}),C&&e.jsx(I,{})]}),e.jsx("div",{className:"d-flex justify-content-between",children:e.jsx("strong",{className:"text-gray-dark",children:t.title})}),e.jsx("div",{className:"d-flex justify-content-between",children:e.jsx("span",{className:"text-gray-dark",children:t.description})}),e.jsxs("div",{className:"mb-2",children:[e.jsx("span",{className:"badge bg-primary me-1",children:t.subjects.nameSubject}),e.jsx("span",{className:"badge bg-success me-1",children:t.educations.nameEducation}),e.jsx("span",{className:"badge bg-warning",children:t.years.year})]}),e.jsxs("div",{className:"d-flex justify-content-end align-items-center",children:[e.jsx(l,{to:t.planning,className:"btn btn-outline-primary btn-sm me-2",children:n("planning")}),e.jsx(l,{to:t.presentation,className:"btn btn-outline-secondary btn-sm",children:n("presentation")})]})]})]})}),c._isAuth?e.jsxs("div",{className:"card",id:"accordionExample",children:[e.jsx("div",{className:"accordion-header collapsed",id:"headingOne",children:e.jsx("a",{className:"accordion-button link",role:"button","data-bs-toggle":"collapse","data-bs-target":"#collapseOne","aria-expanded":"false","aria-controls":"collapseOne",children:e.jsxs("i",{class:"bi bi-chat",children:[" ",n("add_comments")," "]})})}),e.jsx("div",{id:"collapseOne",className:"accordion-collapse collapse","aria-labelledby":"headingOne","data-bs-parent":"#accordionExample",children:e.jsx("div",{className:"accordion-body",children:e.jsx($,{activityId:t.idActivity})})})]}):null,e.jsx("div",{className:"card card-body mt-3",children:r.length>0?e.jsx("ul",{className:"step",children:E.map((s,a)=>e.jsx("li",{className:"step-item",children:e.jsxs("div",{className:"step-content-wrapper",children:[e.jsx("div",{className:"step-avatar",children:e.jsx("span",{className:"avatar avatar-soft-dark","data-toggle":"tooltip","data-placement":"top",title:s.users.name,children:e.jsx("span",{className:"avatar-initials",children:s.users.name.charAt(0).toUpperCase()})})}),e.jsxs("div",{className:"step-content",children:[e.jsxs("small",{className:"text-muted",children:[e.jsx(l,{className:"link",to:`/profile/view-profile/${s.users.idTeacher}`,children:s.users.name})," | ",v(s.created_at)]}),e.jsx("p",{className:"fs-5",children:e.jsx("div",{dangerouslySetInnerHTML:{__html:s.content}})})]})]})},a))}):c._isAuth?e.jsxs("div",{className:"text-center",children:[e.jsx("h5",{children:n("text_info_no_comments_1")}),e.jsx(l,{className:"link","data-bs-toggle":"collapse","data-bs-target":"#collapseOne","aria-expanded":"false","aria-controls":"collapseOne",children:n("text_info_no_comments_2")})]}):e.jsxs("div",{className:"accordion-body",children:[n("text_info_no_comments_3"),", ",e.jsx(l,{className:"link",to:"/sign-in",children:n("log_in")}),"."]})}),r.length>o&&e.jsx("nav",{"aria-label":"Page navigation example",className:"mt-3",children:e.jsx("ul",{className:"pagination justify-content-center",children:[...Array(A)].map((s,a)=>e.jsx("li",{className:`page-item ${a+1===p?"active":""}`,children:e.jsx("button",{className:"page-link",onClick:()=>S(a+1),children:a+1})},a))})})]})]})}export{H as default};
